version: 1
defaultRefs: [master]

tasks:
  - name: tidb-cyclo
    taskType: cyclo
    shellScript: |
      gocyclo -over 20 -avg -ignore "_test|pb.go" ./ | tee repo_cyclo.log

  - name: tidb-build
    taskType: build
    shellScript: |
      make
    outputDir: bin/
    buildEnv:
      image: hub.pingcap.net/jenkins/centos7_golang-1.16:latest
      
      
notify:
  larks: [lark_id1, lark_id1]
  emails: [example1@google.com, example2@google.com]
